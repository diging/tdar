
<div id="sel">
    <div>
    <autocomplete url="/api/lookup/resource"
        suffix="resourceTypes=PROJECT" field="term"
        resultsuffix="resources" 
        @autocompletevalueset="selectProject" ref="input"
        fieldname="title" allowCreate="false" idname="id" />
        </div>
    <div>
        <h5>Other Keywords</h5>
        <b>inherit from project <input type="checkbox" v-model="inhertOther" /></b>
        <tagbox autocomplete_url="/api/lookup/keyword" ref="other" 
            name_field="label" autocomplete_suffix="keywordType=OtherKeyword" 
            result_suffix="items"  />
    </div>
    <div>
        <h5>Culture Keywords</h5>
        <b>inherit from project <input type="checkbox" v-model="inhertCulture" /></b>
        <tagbox autocomplete_url="/api/lookup/keyword" ref="culture" 
            name_field="label" autocomplete_suffix="keywordType=CultureKeyord" 
            result_suffix="items"  />
    </div>
    <div>
        <h5>Temporal Keywords</h5>
        <b>inherit from project <input type="checkbox" v-model="inhertTemporal" /></b>
        <tagbox autocomplete_url="/api/lookup/keyword" ref="temporal" 
            name_field="label" autocomplete_suffix="keywordType=TemporalKeyword" 
            result_suffix="items"  />
    </div>
    <div>
        <h5>Site Name</h5>
        <b>inherit from project <input type="checkbox" v-model="inhertSiteName" /></b>
        <tagbox autocomplete_url="/api/lookup/keyword" ref="siteName"
            name_field="label" autocomplete_suffix="keywordType=SiteNameKeyword" 
            result_suffix="items"  />
    </div>
    <div>
        <h5>Site Type</h5>
        <b>inherit from project <input type="checkbox" v-model="inhertSiteType" /></b>
        <tagbox autocomplete_url="/api/lookup/keyword" ref="siteType"
            name_field="label" autocomplete_suffix="keywordType=SiteTypeKeyword" 
            result_suffix="items"  />
    </div>
    <div>
        <h5>Investigation Type</h5>
        <b>inherit from project <input type="checkbox" v-model="inhertInvestigationType" /></b>
        <tagbox autocomplete_url="/api/lookup/keyword" ref="investigartionType"
            name_field="label" autocomplete_suffix="keywordType=InvestigartionType" 
            result_suffix="items"  />
    </div>
    <div>
        <h5>Geographic</h5>
        <b>inherit from project <input type="checkbox" v-model="inhertSpatial" /></b>
        <tagbox autocomplete_url="/api/lookup/keyword" ref="geographic"
            name_field="label" autocomplete_suffix="keywordType=GeographicKeyword" 
            result_suffix="items"  />
    </div>
    {{project}}
</div>
<script>
$(document).ready(function() {

    var app = new Vue({
        el : "#sel",
        data : {
                separator: ";" ,
                autocomplete_url:'https://localhost:8443/api/lookup/resource',
                autocomplete_suffix:'',
                result_suffix:'resources',
                allow_create:true,
                nameField: 'title',
                idField: 'id',
                projectId: undefined,
                inhertSiteName: false,
                inhertSiteType: false,
                inhertTemporal: false,
                inhertCulture: false,
                inhertSpatial: false,
                inhertOther: false,
                inhertInvestigationType: false,
                project: {}},
                watch: {
                    inhertInvestigationType: function(o, b) {
                        if (this.project.activeInvestigationTypes!= undefined && o == true) {
                            this.$refs.investigartionType.setValues(this.project.activeInvestigationTypes); 
                            this.$refs.investigartionType.disabled = true;
                        }
                    },
                    inhertSiteName: function(o, b) {
                        if (this.project.activeSiteNameKeywords != undefined && o == true)  {
                            this.$refs.siteName.setValues(this.project.activeSiteNameKeywords); 
                            this.$refs.siteName.disabled = true;
                        }
                    },
                    inhertSiteType: function(o, b) {
                        if (this.project.activeSiteTypeKeywords != undefined && o == true) {
                            this.$refs.siteType.setValues(this.project.activeSiteTypeKeywords); 
                            this.$refs.siteType.disabled = true;
                        }
                    },
                    inhertTemporal: function(o, b) {
                        if (this.project.activeTemporalKeywords != undefined && o == true) {
                            this.$refs.temporal.setValues(this.project.activeTemporalKeywords);
                            this.$refs.temporal.disabled = true;
                        }
                    },
                    inhertCulture: function(o, b) {
                        if (this.project.activeCultureKeywords != undefined && o == true) {
                            this.$refs.culture.setValues(this.project.activeCultureKeywords); 
                            this.$refs.culture.disabled = true;
                        }
                    },
                    inhertSpatial: function(o, b) {
                        if (this.project.activeGeographicKeywords != undefined && o == true) {
                            this.$refs.geographic.setValues(this.project.activeGeographicKeywords); 
                            this.$refs.geographic.disabled = true;
                        }
                    },
                    inhertOther: function(o, b) {
                        if (this.project.activeOtherKeywords != undefined && o == true) {
                            this.$refs.other.setValues(this.project.activeOtherKeywords); 
                            this.$refs.other.disabled = true;
                        }
                    }
                },
                methods: {
                    selectProject: function(val) {
                        console.log("project:", val);
                        if (val == undefined) {
                            return;
                        } 
                        this.projectId = val.id;
                        var self = this;
                        axios.get("/project/json/" + val.id).then(function(res) {
                            //Vue.set(self, "isLoading",false);
                            Vue.set(self, 'project',res.data);
                        }).catch(function(thrown) {
                            if (!axios.isCancel(thrown)) {
                                console.error(thrown);
                            }
                        });
                    }
                    
                }
    });

});
</script>
